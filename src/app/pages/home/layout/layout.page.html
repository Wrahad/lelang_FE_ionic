<div class="main-layout-container">
  <nav class="sidebar" [class.open]="isSidebarOpen">
    <ion-content>
      <div class="drawer-header">
        <div class="drawer-header-content">
          <ion-button (click)="toggleSidebar()" expand="clear" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="close-outline"></ion-icon>
          </ion-button>

          <div class="app-logo">
            <ion-icon name="leaf-outline"></ion-icon>
          </div>
          <h1 class="app-title">Lelang Agro</h1>
          <div class="app-tagline">
            <span>üå∂Ô∏è Platform Lelang Pertanian</span>
          </div>
        </div>
      </div>

      <!-- <div class="drawer-user-card">
        <ng-container *ngIf="isLoading"> </ng-container>

        <ng-container *ngIf="!isLoading">
          <ion-avatar class="user-avatar">
            <span class="initials">
              {{ currentUserDisplay.initial }}
            </span>
          </ion-avatar>
          <div class="user-info">
            <div class="user-name">
              {{ currentUserDisplay.name }} 
            </div>
            <div class="user-email">
              {{ currentUserDisplay.email }}
            </div>
          </div>
        </ng-container>
      </div> -->

      <div class="menu-section-title">Menu Utama</div>
      <ion-list lines="none" class="drawer-list">

        <ion-item routerLink="/home/lelang" routerLinkActive="active-item" detail="false">
          <div class="item-content">
            <div class="item-icon-wrapper blue">
              <ion-icon name="home"></ion-icon>
            </div>
            <div class="item-label-wrapper">
              <ion-label>Beranda</ion-label>
              <p>Lihat lelang terbaru</p>
            </div>
            <ion-icon name="chevron-forward-outline" class="forward-icon"></ion-icon>
          </div>
        </ion-item>

        <ion-item routerLink="/home/riwayat" routerLinkActive="active-item" detail="false">
          <div class="item-content">
            <div class="item-icon-wrapper orange">
              <ion-icon name="time-outline"></ion-icon>
            </div>
            <div class="item-label-wrapper">
              <ion-label>Riwayat</ion-label>
              <p>Lihat riwayat lelang anda</p>
            </div>
            <ion-icon name="chevron-forward-outline" class="forward-icon"></ion-icon>
          </div>
        </ion-item>

        <ion-item routerLink="/home/profil" routerLinkActive="active-item" detail="false">
          <div class="item-content">
            <div class="item-icon-wrapper green">
              <ion-icon name="person-outline"></ion-icon>
            </div>
            <div class="item-label-wrapper">
              <ion-label>Profil</ion-label>
              <p>Kelola informasi akun anda</p>
            </div>
            <ion-icon name="chevron-forward-outline" class="forward-icon"></ion-icon>
          </div>
        </ion-item>

        <ion-item button (click)="onLogout()" class="logout-item" detail="false">
          <div class="item-content">
            <div class="item-icon-wrapper red">
              <ion-icon name="log-out-outline"></ion-icon>
            </div>
            <div class="item-label-wrapper">
              <ion-label>
                Logout
              </ion-label>
              <p>Keluar dari akun Anda</p>
            </div>
            <ion-icon name="chevron-forward-outline" class="forward-icon"></ion-icon>
          </div>
        </ion-item>

      </ion-list>
    </ion-content>
  </nav>
  <div class="main-content">
    <ion-header class="ion-no-border">
      <ion-toolbar class="app-toolbar">
        <ion-buttons slot="start">
          <ion-button (click)="toggleSidebar()" class="menu-button-styled">
            <ion-icon name="menu-outline" slot="icon-only"></ion-icon>
          </ion-button>

          <div class="nav-title-group">
            <div class="title-icon-wrapper">
              <ion-icon [name]="currentPage.icon"></ion-icon>
            </div>
            <div class="title-text-wrapper">
              <h2>{{ currentPage.title }}</h2>
              <p>{{ currentPage.subtitle }}</p>
            </div>
          </div>
        </ion-buttons>

        <ion-buttons slot="end">
          <ion-button 
            class="avatar-button"
            (click)="openUserMenu($event)"
            [attr.aria-label]="'Menu pengguna ' + currentUserDisplay.name">
            <ion-avatar>
              <div class="initials">{{ currentUserDisplay.initial }}</div>
            </ion-avatar>
            <ion-icon name="chevron-down-outline"></ion-icon>
          </ion-button>
        </ion-buttons>

      </ion-toolbar>
    </ion-header>

    <ion-content [fullscreen]="true" class="page-content">
      <ion-router-outlet class="page-transition"></ion-router-outlet>
    </ion-content>
  </div>
</div>

<div class="sidebar-overlay" 
     [class.visible]="isSidebarOpen" 
     (click)="toggleSidebar()">
</div>
